<a
  class="ank-position-absolute ank-s-0 ank-t-0 ank-w-1px ank-h-1px ank-overflow-hidden ank-positionFocus-static ank-wFocus-auto ank-hFocus-auto ank-pFocus-0_5rem__1rem ank-bgFocus-abyss ank-colorFocus-white ank-zIndexFocus-1000"
  [href]="'#main-content'"
  role="link"
  [attr.aria-label]="skipLabel()"
  (click)="focusMain($event)"
  >{{ skipLabel() }}</a
>
<app-header
  [config]="headerConfig()"
  (navChange)="onNavChange($event)"
  (analyticsEvent)="handleAnalyticsEvent($event)"
></app-header>
<main id="main-content" class="ank-outline-none" #main role="main" tabindex="-1">
  <router-outlet (activate)="onRouteActivate($event)"></router-outlet>
</main>
@defer {
<app-footer></app-footer>
<!-- Toast host analytics forwarding -->
<app-toast-host (analyticsEvent)="handleAnalyticsEvent($event)"></app-toast-host>
} @placeholder {
<footer class="ank-bg-secondaryBgColor ank-color-secondaryTextColor ank-py-24px ank-px-16px">
  <div class="ank-container ank-maxWidth-7xl ank-marginInline-auto ank-display-flex ank-jc-center ank-gap-16px">
    <div class="ank-width-160px ank-height-12px ank-bg-bgColor ank-opacity-40 ank-borderRadius-8px"></div>
    <div class="ank-width-200px ank-height-12px ank-bg-bgColor ank-opacity-30 ank-borderRadius-8px"></div>
  </div>
</footer>
} @loading {
<footer class="ank-bg-secondaryBgColor ank-py-24px ank-px-16px">
  <div class="ank-container ank-maxWidth-7xl ank-marginInline-auto ank-textAlign-center ank-color-secondaryTextColor">
    Cargando pie de p√°gina‚Ä¶
  </div>
</footer>
} @error {
<footer class="ank-bg-secondaryBgColor ank-py-24px ank-px-16px">
  <div class="ank-container ank-maxWidth-7xl ank-marginInline-auto ank-textAlign-center ank-color-secondaryTextColor">
    No se pudo cargar el pie de p√°gina.
  </div>
</footer>
}

<!-- Advanced component hosts -->
<app-modal-host
  [config]="{
    ariaLabel:
      activeModalRef()?.id === 'analytics-consent'
        ? 'Analytics consent dialog'
        : activeModalRef()?.id === 'terms-of-service'
        ? t('footer.legal.terms.title')
        : activeModalRef()?.id === 'data-use'
        ? t('footer.legal.data.title')
        : 'Dialog',
    closeOnBackdrop: activeModalRef()?.id === 'analytics-consent' ? false : true,
    showCloseButton: activeModalRef()?.id === 'analytics-consent' ? false : true,
    size: activeModalRef()?.id === 'terms-of-service' ? 'lg' : activeModalRef()?.id === 'data-use' ? 'md' : 'sm',
    showAccentBar: true,
    accentColor: 'secondaryAccentColor',
    variant: activeModalRef()?.id === 'analytics-consent' ? consentVariant() : 'dialog'
  }"
>
  @if (analytics.consentVisible()) {
  <section class="ank-display-flex ank-flexDirection-column ank-gap-0_75rem ank-w-100per">
    <div
      class="ank-display-flex ank-alignItems-center ank-gap-0_5rem ank-bg-secondaryBgColor ank-border-1px ank-borderColor-border ank-p-0_5rem ank-borderRadius-0_5rem"
    >
      <div
        class="ank-width-2rem ank-height-2rem ank-borderRadius-50per ank-bg-accentColor ank-display-flex ank-alignItems-center ank-justifyContent-center ank-color-bgColor ank-fontWeight-700"
      >
        ‚ìò
      </div>
      <h2 class="ank-m-0 ank-fontSize-1_125rem ank-fontWeight-700 ank-color-textColor">{{ t("consent.title") }}</h2>
    </div>

    <p class="ank-m-0 ank-color-secondaryTextColor">{{ t("consent.intro") }}</p>

    <ul class="ank-m-0 ank-pt-0_25rem ank-pl-1rem ank-color-secondaryTextColor">
      <li>{{ t("consent.bullets.0") }}</li>
      <li>{{ t("consent.bullets.1") }}</li>
      <li>{{ t("consent.bullets.2") }}</li>
    </ul>

    <div
      class="ank-display-flex ank-gap-0_5rem ank-justifyContent-end ank-alignItems-stretch ank-mt-0_75rem ank-flexWrap-wrap"
    >
      <generic-button
        [label]="t('consent.actions.decline')"
        variant="primary"
        colorKey="secondaryAccentColor"
        size="md"
        (pressed)="analytics.declineConsent()"
      />
      <generic-button
        [label]="t('consent.actions.later')"
        variant="primary"
        colorKey="warning"
        size="md"
        (pressed)="analytics.remindLater(24)"
      />
      <generic-button
        [label]="t('consent.actions.allow')"
        variant="primary"
        colorKey="primary"
        size="md"
        (pressed)="analytics.acceptConsent()"
      />
    </div>
  </section>
  } @if (activeModalRef()?.id === 'terms-of-service') {
  <section class="ank-display-flex ank-flexDirection-column ank-gap-0_75rem ank-w-100per">
    <header
      class="ank-display-flex ank-alignItems-center ank-gap-0_5rem ank-bg-secondaryBgColor ank-border-1px ank-borderColor-border ank-p-0_5rem ank-borderRadius-0_5rem"
    >
      <div
        class="ank-width-2rem ank-height-2rem ank-borderRadius-50per ank-bg-secondaryAccentColor ank-display-flex ank-alignItems-center ank-justifyContent-center ank-color-bgColor ank-fontWeight-700"
      >
        ‚öñÔ∏è
      </div>
      <h2 class="ank-m-0 ank-fontSize-1_125rem ank-fontWeight-700 ank-color-textColor">
        {{ t("footer.legal.terms.title") }}
      </h2>
    </header>
    <p class="ank-m-0 ank-color-secondaryTextColor">{{ t("footer.legal.terms.intro", { org: appName }) }}</p>
    <ol
      class="ank-m-0 ank-pl-1rem ank-color-secondaryTextColor ank-display-flex ank-flexDirection-column ank-gap-0_5rem"
    >
      <li>
        <strong>{{ t("footer.legal.terms.sections.0.title") }}</strong>
        <p class="ank-mt-0_25rem">{{ t("footer.legal.terms.sections.0.text") }}</p>
      </li>
      <li>
        <strong>{{ t("footer.legal.terms.sections.1.title") }}</strong>
        <p class="ank-mt-0_25rem">{{ t("footer.legal.terms.sections.1.text") }}</p>
      </li>
      <li>
        <strong>{{ t("footer.legal.terms.sections.2.title") }}</strong>
        <p class="ank-mt-0_25rem">{{ t("footer.legal.terms.sections.2.text") }}</p>
      </li>
      <li>
        <strong>{{ t("footer.legal.terms.sections.3.title") }}</strong>
        <p class="ank-mt-0_25rem">{{ t("footer.legal.terms.sections.3.text") }}</p>
      </li>
    </ol>
    <div class="ank-display-flex ank-justifyContent-end ank-gap-0_5rem ank-mt-0_75rem">
      <generic-button
        [label]="t('footer.actions.close')"
        variant="primary"
        colorKey="secondaryAccentColor"
        size="md"
        (pressed)="closeModal()"
      />
    </div>
  </section>
  } @if (activeModalRef()?.id === 'data-use') {
  <section class="ank-display-flex ank-flexDirection-column ank-gap-0_75rem ank-w-100per">
    <header
      class="ank-display-flex ank-alignItems-center ank-gap-0_5rem ank-bg-secondaryBgColor ank-border-1px ank-borderColor-border ank-p-0_5rem ank-borderRadius-0_5rem"
    >
      <div
        class="ank-width-2rem ank-height-2rem ank-borderRadius-50per ank-bg-secondaryAccentColor ank-display-flex ank-alignItems-center ank-justifyContent-center ank-color-bgColor ank-fontWeight-700"
      >
        üîí
      </div>
      <h2 class="ank-m-0 ank-fontSize-1_125rem ank-fontWeight-700 ank-color-textColor">
        {{ t("footer.legal.data.title") }}
      </h2>
    </header>
    <p class="ank-m-0 ank-color-secondaryTextColor">{{ t("footer.legal.data.intro") }}</p>
    <ul
      class="ank-m-0 ank-pl-1rem ank-color-secondaryTextColor ank-display-flex ank-flexDirection-column ank-gap-0_5rem"
    >
      <li>{{ t("footer.legal.data.points.0") }}</li>
      <li>{{ t("footer.legal.data.points.1") }}</li>
      <li>{{ t("footer.legal.data.points.2") }}</li>
      <li>{{ t("footer.legal.data.points.3") }}</li>
    </ul>
    <p class="ank-m-0 ank-color-secondaryTextColor">{{ t("footer.legal.data.consentNote") }}</p>
    <div class="ank-display-flex ank-justifyContent-end ank-gap-0_5rem ank-mt-0_75rem">
      <generic-button
        [label]="t('footer.actions.close')"
        variant="primary"
        colorKey="secondaryAccentColor"
        size="md"
        (pressed)="closeModal()"
      />
    </div>
  </section>
  }
</app-modal-host>
<app-toast-host></app-toast-host>

<!-- Dev-only demo controls -->
@if (debugMode) {
<div
  class="ank-position-md-fixed ank-bottom-0 ank-left-0 ank-p-0_5rem ank-display-flex ank-flexWrap-wrap ank-gap-0_5rem ank-zIndex-1200 ank-maxWidth-300px"
>
  <button class="btnBaseVALSVL0_5remVL0_5rem ank-fs-1rem ank-btn-primary ank-color-textColor" (click)="showDemoModal()">
    Modal
  </button>
  <button class="btnBaseVALSVL0_5remVL0_5rem ank-fs-1rem ank-btn-success ank-color-textColor" (click)="showDemoToast()">
    Toast
  </button>
  <button class="btnBaseVALSVL0_5remVL0_5rem ank-fs-1rem ank-btn-error ank-color-textColor" (click)="showErrorToast()">
    Error
  </button>
  <button
    class="btnBaseVALSVL0_5remVL0_5rem ank-fs-1rem ank-btn-warning ank-color-textColor"
    (click)="showActionToast()"
  >
    Actions
  </button>
  <button class="btnBaseVALSVL0_5remVL0_5rem ank-fs-1rem ank-btn-info ank-color-textColor" (click)="showPositionDemo()">
    Position
  </button>
  <button
    class="btnBaseVALSVL0_5remVL0_5rem ank-fs-1rem ank-btn-secondary ank-color-textColor"
    (click)="clearAllToasts()"
  >
    Clear
  </button>
</div>

<div
  class="ank-position-md-fixed ank-bottom-0 ank-right-25vw ank-m-0_5rem ank-p-0_5rem ank-bg-blackOPA__0_6 ank-color-white ank-fs-12px ank-borderRadius-6px ank-maxWidth-360px ank-maxHeight-40vh ank-overflow-auto ank-zIndex-1200"
>
  <div class="ank-fontWeight-600 ank-mb-0_25rem">Analytics (latest)</div>
  <ul class="ank-m-0 ank-pl-1rem">
    @for (e of recentEvents(); track $index) {
    <li>{{ e }}</li>
    }
  </ul>
</div>
}
